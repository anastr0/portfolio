<!-- import { timeline } from "motion"; -->

<div id="three-container"></div>

<script type="module">
    import * as THREE from "https://cdn.jsdelivr.net/npm/three@v0.149.0/build/three.module.js"

    // import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    // import Stats from 'three/addons/libs/stats.module.js';
    import { GUI } from 'three/addons/libs/lil-gui.module.min.js';

    const main = document.getElementById("three-container")
    // var stats = new Stats();
    // container.appendChild( stats.dom );

    const bulbLuminousPowers = {
				'110000 lm (1000W)': 110000,
				'3500 lm (300W)': 3500,
				'1700 lm (100W)': 1700,
				'800 lm (60W)': 800,
				'400 lm (40W)': 400,
				'180 lm (25W)': 180,
				'20 lm (4W)': 20,
				'Off': 0
    };
        // ref for solar irradiances: https://en.wikipedia.org/wiki/Lux
    const hemiLuminousIrradiances = {
        '0.0001 lx (Moonless Night)': 0.0001,
        '0.002 lx (Night Airglow)': 0.002,
        '0.5 lx (Full Moon)': 0.5,
        '3.4 lx (City Twilight)': 3.4,
        '50 lx (Living Room)': 50,
        '100 lx (Very Overcast)': 100,
        '350 lx (Office Room)': 350,
        '400 lx (Sunrise/Sunset)': 400,
        '1000 lx (Overcast)': 1000,
        '18000 lx (Daylight)': 18000,
        '50000 lx (Direct Sun)': 50000
    };
    const params = {
        shadows: true,
        exposure: 0.68,
        bulbPower: Object.keys( bulbLuminousPowers )[ 4 ],
        hemiIrradiance: Object.keys( hemiLuminousIrradiances )[ 0 ]
    };

    var camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 0.1, 100 );
    camera.position.x = - 4;
    camera.position.z = 4;
    camera.position.y = 2;
    
    var scene = new THREE.Scene({ alpha: true })

    // var camera = new THREE.PerspectiveCamera(
    //     25,
    //     main.offsetWidth / main.offsetHeight,
    //     0.1,
    //     1000
    // )

    const bulbGeometry = new THREE.SphereGeometry( 0.02, 16, 8 );
    var bulbLight = new THREE.PointLight( 0xffee88, 1, 100, 2 );

    var bulbMat = new THREE.MeshStandardMaterial( {
        emissive: 0xffffee,
        emissiveIntensity: 1,
        color: 0x000000
    } );
    bulbLight.add( new THREE.Mesh( bulbGeometry, bulbMat ) );
    bulbLight.position.set( 0, 2, 0 );
    bulbLight.castShadow = true;


    scene.add( bulbLight );
    var hemiLight = new THREE.HemisphereLight( 0xddeeff, 0x0f0e0d, 0.02 );
    scene.add( hemiLight );

    // var renderer = new THREE.WebGLRenderer({ antialias: true })
    // renderer.setSize(main.offsetWidth, main.offsetHeight)
    

    var renderer = new THREE.WebGLRenderer();
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.shadowMap.enabled = true;
    renderer.toneMapping = THREE.ReinhardToneMapping;
    main.appendChild(renderer.domElement)

    // const controls = new OrbitControls( camera, renderer.domElement );
    // controls.minDistance = 1;
    // controls.maxDistance = 20;
    const gui = new GUI();

    gui.add( params, 'hemiIrradiance', Object.keys( hemiLuminousIrradiances ) );
    gui.add( params, 'bulbPower', Object.keys( bulbLuminousPowers ) );
    gui.add( params, 'exposure', 0, 1 );
    gui.add( params, 'shadows' );
    gui.open();

    /**
     * Create Three.js render loop using Motion's frameloop
     */
    frame.render(() => renderer.render(scene, camera), true)

    /**
     * Animate cube rotation
     */

</script>

<style>
    body {
        background: #000;
    }
    #three-container {
        width: 300px;
        height: 200px;
    }
</style>